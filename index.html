<html>

<body style="background-color: black;">
    <img src="Warrior_Red.png" hidden />
    <canvas></canvas>
    <script>
        const canvas = document.querySelector("canvas")
        const ctx = canvas.getContext("2d")
        const imagem = document.querySelector('img')

        canvas.width = 1024;
        canvas.height = 720;

        let x = canvas.width / 2;
        let y = canvas.height / 2;

        let frames = 0
        let colunaFrame = 0;
        let linhaFrame = 2;

        function animation() {
            requestAnimationFrame(animation)

            ctx.fillStyle = "white"
            ctx.fillRect(0, 0, canvas.width, canvas.height)

            ctx.fillStyle = "blue";
            ctx.fillRect(x, y, 50, 50)

            const alturaFrame = imagem.height / 8; //8 linha no sprite
            const larguraFrame = imagem.width / 6  //6 colunas no sprite
            ctx.drawImage(
                imagem,                     //imagem para recorte
                colunaFrame * larguraFrame, //x inicio corte
                linhaFrame * alturaFrame,   //y inicio corte
                larguraFrame,               //largura de corte
                alturaFrame,                //altura de corte,
                100,                        //x para desenho no canvas
                100,                        //y para desenho no canvas
                larguraFrame,               //largura do desenho no canvas
                alturaFrame                 //altura do desenho no canvas
            )

            if (y < canvas.height - 50)
                y += 10;

            if (frames % 10 == 0) {
                if (colunaFrame > 4)
                    colunaFrame = 0
                else
                    colunaFrame++
            }

            frames++
        }

        addEventListener('keydown', (tecla) => {
            if (tecla.code == "KeyA")
                x -= 10
            else if (tecla.code == "KeyD")
                x += 10
            else if (tecla.code == "KeyW")
                y -= 20
        })

        animation();

    </script>
</body>

</html>